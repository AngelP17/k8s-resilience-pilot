################################################################################
# The Resilience Pilot - Kubernetes Service
#
# SRE Concepts Demonstrated:
# - Service discovery: Stable DNS name for pod access
# - Load balancing: Traffic distributed across healthy pods
# - Prometheus integration: Annotations for metric scraping
################################################################################

apiVersion: v1
kind: Service
metadata:
  name: resilience-pilot
  labels:
    app: resilience-pilot
  annotations:
    # Prometheus ServiceMonitor annotations
    # These tell Prometheus how to scrape this service
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"
spec:
  # ClusterIP: Internal-only access (Ingress handles external traffic)
  type: ClusterIP
  
  # Selector matches the deployment pods
  selector:
    app: resilience-pilot
  
  ports:
    - name: http
      port: 8080
      targetPort: 8080
      protocol: TCP
